const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnreadMessages-TIRAT7dr.js","assets/globalConfig-CHan-_e7.js","assets/_plugin-vue_export-helper-CRziL3b0.js","assets/globalConfig-DJ-p7H5Q.css","assets/UnreadMessageList-BNYHSsAc.js","assets/module-4Qn3bmsu.js","assets/Icon-C9M9PX5n.js","assets/useMessageFormatter-BWcWDZNI.js","assets/_commonjsHelpers-BosuxZz1.js","assets/Thumbnail-BFDpZJSw.js","assets/Thumbnail-DNBHnJdS.css","assets/colorHelper-DkkSNPxc.js","assets/UnreadMessageList-ijg8UfU0.css","assets/vue-dompurify-html-DpBcnsxt.js","assets/sharedFrameEvents-D3mqcMaH.js","assets/index-DN3rM4CW.js","assets/axios-CmsuhreG.js","assets/constants-lVAyZKq6.js","assets/Validators-Cv8-yvgr.js","assets/index-CqcCmear.js","assets/Branding-n_VQ3DHz.js","assets/Campaigns-Br5fayX2.js","assets/Home-B0uc_YgW.js","assets/utils.esm-C570BaG5.js","assets/PreChatForm-BeBbZ4F7.js","assets/Button-Du8qV_Y6.js","assets/helper-DcGaBm2u.js","assets/PreChatForm-DnUe62Wp.css","assets/Messages-BHdFuGPN.js","assets/typing-BjUbEuL4.js","assets/exports-CVYQOQsl.js","assets/typing-Dahw8yhV.css","assets/EmojiInput-loN5vYSv.js","assets/EmojiInput-CUBQ2K7V.css","assets/Messages-DNDm3MBU.css","assets/ArticleViewer-BeYIG06_.js","assets/IframeLoader-Dkum163o.js"])))=>i.map(i=>d[i]);
var pa=Object.defineProperty;var ma=(e,t,a)=>t in e?pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var S=(e,t,a)=>ma(e,typeof t!="symbol"?t+"":t,a);import{c as me,_ as ne,u as F,o as U,n as k,e as L,q as Q,p as N,t as Ft,k as H,g as ve,M as Lt,a as fe,j as va,G as _a}from"./_plugin-vue_export-helper-CRziL3b0.js";import{e as z,p as wa,q as ya,S as Ca,m as lt,s as oe,t as ge,_ as ee,o as Ta}from"./globalConfig-CHan-_e7.js";import{k as Ma}from"./vue-dompurify-html-DpBcnsxt.js";import{d as dt,S as ba,g as xa,a as Da,c as Ea,e as yt,p as Oa}from"./sharedFrameEvents-D3mqcMaH.js";import{a as Sa}from"./axios-CmsuhreG.js";import{A as Aa,W as Ct,M as ue}from"./constants-lVAyZKq6.js";import{L as _e,z as Ua,k as Ia,g as Pa,B as Na,o as Wa,C as ka,D as Ra,E as Fa}from"./Validators-Cv8-yvgr.js";import{x as Ht,y as La,r as Ha,z as Tt,b as Ya,B as $a,f as Mt,A as he,h as bt,v as Ba,w as za,d as Va}from"./index-CqcCmear.js";import{B as qa}from"./Branding-n_VQ3DHz.js";import{F as Yt,d as Ga,a as Za}from"./module-4Qn3bmsu.js";import"./index-DN3rM4CW.js";import"./_commonjsHelpers-BosuxZz1.js";import"./Icon-C9M9PX5n.js";const E=Sa.create({baseURL:Aa,withCredentials:!1}),$t=(e,t="X-Auth-Token")=>{E.defaults.headers.common[t]=e},Bt=()=>({initiated_at:{timestamp:new Date().toString()},referer:window.referrerURL||""}),Xa={create(e){const t=dt(window.location.search);return E.post(`/api/v1/widget/events${t}`,{name:e,event_info:Bt()})}},Qa=e=>{const t=window.referrerURL||"";return{url:`/api/v1/widget/conversations${dt(window.location.search)}`,params:{contact:{name:e.fullName,email:e.emailAddress,phone_number:e.phoneNumber},message:{content:e.message,timestamp:new Date().toString(),referer_url:t},custom_attributes:e.customAttributes}}},Ka=(e,t)=>{const a=window.referrerURL||"";return{url:`/api/v1/widget/messages${dt(window.location.search)}`,params:{message:{content:e,reply_to:t,timestamp:new Date().toString(),referer_url:a}}}},Ja=({attachment:e,replyTo:t=null})=>{const{referrerURL:a=""}=window,n=new Date().toString(),{file:s}=e,r=new FormData;return typeof s=="string"?r.append("message[attachments][]",s):r.append("message[attachments][]",s,s.name),r.append("message[referer_url]",a),r.append("message[timestamp]",n),t!==null&&r.append("message[reply_to]",t),{url:`/api/v1/widget/messages${window.location.search}`,params:r}},ja=({before:e,after:t})=>({url:`/api/v1/widget/messages${window.location.search}`,params:{before:e,after:t}}),en=e=>({url:`/api/v1/widget/messages/${e}${window.location.search}`}),tn=e=>({url:"/api/v1/widget/inbox_members",params:{website_token:e}}),an=e=>({url:"/api/v1/widget/campaigns",params:{website_token:e}}),nn=({websiteToken:e,campaignId:t,customAttributes:a})=>({url:"/api/v1/widget/events",data:{name:"campaign.triggered",event_info:{campaign_id:t,custom_attributes:a,...Bt()}},params:{website_token:e}}),rn=(e,t)=>({url:`/hc/${e}/${t}/articles.json`,params:{page:1,sort:"views",status:1,per_page:6}}),V={createConversation:Qa,sendMessage:Ka,sendAttachment:Ja,getConversation:ja,updateMessage:en,getAvailableAgents:tn,getCampaigns:an,triggerCampaign:nn,getMostReadArticles:rn},sn=async e=>{const t=V.getAvailableAgents(e);return E.get(t.url,{params:t.params})},on=24*60*60*1e3,ft=(e,t=on)=>{try{const a=_e.get(e);if(!a)return null;const{data:n,timestamp:s}=a;return Date.now()-s>t?(_e.remove(e),null):n}catch{return null}},gt=(e,t)=>{try{const a={data:t,timestamp:Date.now()};_e.set(e,a)}catch{}},un={records:[],uiFlags:{isError:!1,hasFetched:!1}},cn={getHasFetched:e=>e.uiFlags.hasFetched,availableAgents:e=>e.records.filter(t=>t.availability_status==="online")},xt="chatwoot_available_agents_",ln={fetchAvailableAgents:async({commit:e},t)=>{try{const a=ft(`${xt}${t}`);if(a){e("setAgents",a),e("setError",!1),e("setHasFetched",!0);return}const{data:n}=await sn(t),{payload:s=[]}=n;gt(`${xt}${t}`,s),e("setAgents",s),e("setError",!1),e("setHasFetched",!0)}catch{e("setError",!0),e("setHasFetched",!0)}},updatePresence:async({commit:e},t)=>{e("updatePresence",t)}},dn={setAgents(e,t){e.records=t},updatePresence:Ua,setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t}},fn={namespaced:!0,state:un,getters:cn,actions:ln,mutations:dn},gn="CLEAR_CONVERSATION_ATTRIBUTES",zt="SET_CONVERSATION_ATTRIBUTES",Vt="SET_WIDGET_APP_CONFIG",qt="SET_WIDGET_COLOR",Gt="SET_COLOR_SCHEME",Zt="UPDATE_CONVERSATION_ATTRIBUTES",Xt="TOGGLE_WIDGET_OPEN",Qt="SET_REFERRER_HOST",Kt="SET_BUBBLE_VISIBILITY",Jt="SET_ROUTE_UPDATE_STATE",hn={hideMessageBubble:!1,isCampaignViewClicked:!1,showUnreadMessagesDialog:!0,isWebWidgetTriggered:!1,isWidgetOpen:!1,position:"right",referrerHost:"",showPopoutButton:!1,widgetColor:"",widgetStyle:"standard",darkMode:"light",isUpdatingRoute:!1},pn={getAppConfig:e=>e,isRightAligned:e=>e.position==="right",getHideMessageBubble:e=>e.hideMessageBubble,getIsWidgetOpen:e=>e.isWidgetOpen,getWidgetColor:e=>e.widgetColor,getReferrerHost:e=>e.referrerHost,isWidgetStyleFlat:e=>e.widgetStyle==="flat",darkMode:e=>e.darkMode,getShowUnreadMessagesDialog:e=>e.showUnreadMessagesDialog,getIsUpdatingRoute:e=>e.isUpdatingRoute},mn={setAppConfig({commit:e},{showPopoutButton:t,position:a,hideMessageBubble:n,showUnreadMessagesDialog:s,widgetStyle:r="rounded",darkMode:i="light"}){e(Vt,{hideMessageBubble:!!n,position:a||"right",showPopoutButton:!!t,showUnreadMessagesDialog:!!s,widgetStyle:r,darkMode:i})},toggleWidgetOpen({commit:e},t){e(Xt,t)},setWidgetColor({commit:e},t){e(qt,t)},setColorScheme({commit:e},t){e(Gt,t)},setReferrerHost({commit:e},t){e(Qt,t)},setBubbleVisibility({commit:e},t){e(Kt,t)},setRouteTransitionState:async({commit:e},t)=>{e(Jt,t)}},vn={[Vt](e,t){e.showPopoutButton=t.showPopoutButton,e.position=t.position,e.hideMessageBubble=t.hideMessageBubble,e.widgetStyle=t.widgetStyle,e.darkMode=t.darkMode,e.locale=t.locale||e.locale,e.showUnreadMessagesDialog=t.showUnreadMessagesDialog},[Xt](e,t){e.isWidgetOpen=t},[qt](e,t){e.widgetColor=t},[Qt](e,t){e.referrerHost=t},[Kt](e,t){e.hideMessageBubble=t},[Gt](e,t){e.darkMode=t},[Jt](e,t){e.isUpdatingRoute=t}},_n={namespaced:!0,state:hn,getters:pn,actions:mn,mutations:vn},wn=e=>e?Object.keys(e).length===0&&e.constructor===Object:!0,ht=e=>{window.parent.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`,"*")},A={isIFrame:()=>window.self!==window.top,sendMessage:ht,isAValidEvent:e=>typeof e.data=="string"&&e.data.indexOf(Ct)===0,getMessage:e=>JSON.parse(e.data.replace(Ct,""))},ce={isRNWebView:()=>window.ReactNativeWebView,sendMessage:e=>{window.ReactNativeWebView.postMessage(`chatwoot-widget:${JSON.stringify({...e})}`)}},yn=(e,t)=>e.reduce((a,n)=>{var s;return(a[s=t(n)]||(a[s]=[])).push(n),a},{}),te=e=>`/api/v1/${e}${window.location.search}`,ae={get(){return E.get(te("widget/contact"))},update(e){return E.patch(te("widget/contact"),e)},setUser(e,t){return E.patch(te("widget/contact/set_user"),{identifier:e,...t})},setCustomAttributes(e={}){return E.patch(te("widget/contact"),{custom_attributes:e})},deleteCustomAttribute(e){return E.post(te("widget/contact/destroy_custom_attributes"),{custom_attributes:[e]})}},Cn={currentUser:{}},jt="SET_CURRENT_USER",Tn=e=>e&&e.response&&e.response.data?e.response.data:e,Mn=e=>{e&&($t(e),ht({event:"setAuthCookie",data:{widgetAuthToken:e}}))},bn={getCurrentUser(e){return e.currentUser}},xn={get:async({commit:e})=>{try{const{data:t}=await ae.get();e(jt,t)}catch{}},update:async({dispatch:e},{user:t})=>{try{await ae.update(t),e("get")}catch{}},setUser:async({dispatch:e},{identifier:t,user:a})=>{try{const{email:n,name:s,avatar_url:r,identifier_hash:i,phone_number:o,company_name:u,city:l,country_code:h,description:_,custom_attributes:y,social_profiles:v}=a,M={email:n,name:s,avatar_url:r,identifier_hash:i,phone_number:o,additional_attributes:{company_name:u,city:l,description:_,country_code:h,social_profiles:v},custom_attributes:y},{data:{widget_auth_token:m}}=await ae.setUser(t,M);Mn(m),e("get"),(i||m)&&(e("conversation/clearConversations",{},{root:!0}),e("conversation/fetchOldConversations",{},{root:!0}),e("conversationAttributes/getAttributes",{},{root:!0}))}catch(n){const s=Tn(n);ht({event:"error",errorType:ba,data:s})}},setCustomAttributes:async(e,t={})=>{try{await ae.setCustomAttributes(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await ae.deleteCustomAttribute(t)}catch{}}},Dn={[jt](e,t){const{currentUser:a}=e;e.currentUser={...a,...t}}},En={namespaced:!0,state:Cn,getters:bn,actions:xn,mutations:Dn},Dt=({attachments:e,content:t,replyTo:a})=>{const n=new Date().getTime()/1e3;return{id:Ia(),content:t,attachments:e,status:"in_progress",replyTo:a,created_at:n,message_type:ue.INCOMING}},Et=e=>e.sender?e.sender.name:"",On=(e,t)=>{const a=Et(e),n=Et(t);return a!==n||e.message_type!==t.message_type||Ht(t)},Sn=e=>e.map((t,a)=>{let n;const s=a===e.length-1;if(Ht(t))n=!1;else if(s)n=!0;else{const r=e[a+1];n=On(t,r)}return{showAvatar:n,...t}}),An=(e,{content:t})=>Object.values(e).filter(a=>a.content===t&&a.status==="in_progress"),Ot=({messages:e})=>e.filter(t=>!(t.content_attributes&&t.content_attributes.deleted)),Un={getAllMessagesLoaded:e=>e.uiFlags.allMessagesLoaded,getIsCreating:e=>e.uiFlags.isCreating,getIsAgentTyping:e=>e.uiFlags.isAgentTyping,getConversation:e=>e.conversations,getConversationSize:e=>Object.keys(e.conversations).length,getEarliestMessage:e=>{const t=Object.values(e.conversations);return t.length?t[0]:{}},getLastMessage:e=>{const t=Object.values(e.conversations);return t.length?t[t.length-1]:{}},getGroupedConversation:e=>{const t=yn(Object.values(e.conversations),a=>La(a.created_at));return Object.keys(t).map(a=>({date:a,messages:Sn(t[a])}))},getIsFetchingList:e=>e.uiFlags.isFetchingList,getMessageCount:e=>Object.values(e.conversations).length,getUnreadMessageCount:e=>{const{userLastSeenAt:t}=e.meta;return Object.values(e.conversations).filter(a=>{const{created_at:n,message_type:s}=a,r=s===ue.OUTGOING;return(t?n*1e3>t*1e3:!0)&&r}).length},getUnreadTextMessages:(e,t)=>{const a=t.getUnreadMessageCount,s=[...Object.values(e.conversations)].filter(i=>{const{message_type:o}=i;return o===ue.OUTGOING}),r=Math.min(a,3);return s.splice(-r)}},In=async e=>{const t=V.createConversation(e);return E.post(t.url,t.params)},Pn=async(e,t=null)=>{const a=V.sendMessage(e,t);return E.post(a.url,a.params)},Nn=async(e,t=null)=>{const a=V.sendAttachment(e,t);return E.post(a.url,a.params)},St=async({before:e,after:t})=>{const a=V.getConversation({before:e,after:t});return E.get(a.url,{params:a.params})},Wn=async()=>E.get(`/api/v1/widget/conversations${window.location.search}`),kn=async({typingStatus:e})=>E.post(`/api/v1/widget/conversations/toggle_typing${window.location.search}`,{typing_status:e}),Rn=async({lastSeen:e})=>E.post(`/api/v1/widget/conversations/update_last_seen${window.location.search}`,{contact_last_seen_at:e}),ui=async()=>E.post(`/api/v1/widget/conversations/transcript${window.location.search}`),Fn=async()=>E.get(`/api/v1/widget/conversations/toggle_status${window.location.search}`),Ln=async e=>E.post(`/api/v1/widget/conversations/set_custom_attributes${window.location.search}`,{custom_attributes:e}),Hn=async e=>E.post(`/api/v1/widget/conversations/destroy_custom_attributes${window.location.search}`,{custom_attribute:[e]}),ea="ON_AGENT_MESSAGE_RECEIVED",Yn="ON_UNREAD_MESSAGE_CLICK",$n="ON_CAMPAIGN_MESSAGE_CLICK",Bn="ON_CONVERSATION_CREATED",zn={createConversation:async({commit:e,dispatch:t},a)=>{e("setConversationUIFlag",{isCreating:!0});try{const{data:n}=await In(a),{messages:s}=n,[r={}]=s;e("pushMessageToConversation",r),t("conversationAttributes/getAttributes",{},{root:!0}),z.emit(Bn)}catch{}finally{e("setConversationUIFlag",{isCreating:!1})}},sendMessage:async({dispatch:e},t)=>{const{content:a,replyTo:n}=t,s=Dt({content:a,replyTo:n});e("sendMessageWithData",s)},sendMessageWithData:async({commit:e},t)=>{const{id:a,content:n,replyTo:s,meta:r={}}=t;e("pushMessageToConversation",t),e("updateMessageMeta",{id:a,meta:{...r,error:""}});try{const{data:i}=await Pn(n,s);e("pushMessageToConversation",{...i,status:"sent"})}catch{e("pushMessageToConversation",{...t,status:"failed"}),e("updateMessageMeta",{id:a,meta:{...r,error:""}})}},setLastMessageId:async({commit:e})=>{e("setLastMessageId")},sendAttachment:async({commit:e},t)=>{const{attachment:{thumbUrl:a,fileType:n},meta:s={}}=t,i=Dt({attachments:[{thumb_url:a,data_url:a,file_type:n,status:"in_progress"}],replyTo:t.replyTo});e("pushMessageToConversation",i);try{const{data:o}=await Nn(t);e("updateAttachmentMessageStatus",{message:o,tempId:i.id}),e("pushMessageToConversation",{...o,status:"sent"})}catch{e("pushMessageToConversation",{...i,status:"failed"}),e("updateMessageMeta",{id:i.id,meta:{...s,error:""}})}},fetchOldConversations:async({commit:e},{before:t}={})=>{try{e("setConversationListLoading",!0);const{data:{payload:a,meta:n}}=await St({before:t}),{contact_last_seen_at:s}=n,r=Ot({messages:a});e("conversation/setMetaUserLastSeenAt",s,{root:!0}),e("setMessagesInConversation",r),e("setConversationListLoading",!1)}catch{e("setConversationListLoading",!1)}},syncLatestMessages:async({state:e,commit:t})=>{try{const{lastMessageId:a,conversations:n}=e,{data:{payload:s,meta:r}}=await St({after:a}),{contact_last_seen_at:i}=r,u=Ot({messages:s}).filter(h=>(n==null?void 0:n[h.id])===void 0);if(!u.length)return;u.forEach(h=>{n[h.id]=h});const l=Object.fromEntries(Object.entries(n).sort((h,_)=>h[1].created_at-_[1].created_at));t("conversation/setMetaUserLastSeenAt",i,{root:!0}),t("setMissingMessagesInConversation",l)}catch{}},clearConversations:({commit:e})=>{e("clearConversations")},addOrUpdateMessage:async({commit:e},t)=>{const{id:a,content_attributes:n}=t;if(n&&n.deleted){e("deleteMessage",a);return}e("pushMessageToConversation",t)},toggleAgentTyping({commit:e},t){e("toggleAgentTypingStatus",t)},toggleUserTyping:async(e,t)=>{try{await kn(t)}catch{}},setUserLastSeen:async({commit:e,getters:t})=>{if(!t.getConversationSize)return;const a=Date.now()/1e3;try{e("setMetaUserLastSeenAt",a),await Rn({lastSeen:a})}catch{}},resolveConversation:async()=>{await Fn()},setCustomAttributes:async(e,t={})=>{try{await Ln(t)}catch{}},deleteCustomAttribute:async(e,t)=>{try{await Hn(t)}catch{}}},Vn={clearConversations(e){e.conversations={}},pushMessageToConversation(e,t){const{id:a,status:n,message_type:s}=t,r=e.conversations;if(!(s===ue.INCOMING)||n==="in_progress"){r[a]=t;return}const[u]=An(r,t);u&&delete r[u.id],r[a]=t},updateAttachmentMessageStatus(e,{message:t,tempId:a}){const{id:n}=t,s=e.conversations;s[a]&&(delete s[a],s[n]={...t})},setConversationUIFlag(e,t){e.uiFlags={...e.uiFlags,...t}},setConversationListLoading(e,t){e.uiFlags.isFetchingList=t},setMessagesInConversation(e,t){if(!t.length){e.uiFlags.allMessagesLoaded=!0;return}t.forEach(a=>{e.conversations[a.id]=a})},setMissingMessagesInConversation(e,t){e.conversation=t},updateMessage(e,{id:t,content_attributes:a}){e.conversations[t]={...e.conversations[t],content_attributes:{...e.conversations[t].content_attributes||{},...a}}},updateMessageMeta(e,{id:t,meta:a}){const n=e.conversations[t];if(!n)return;const s=n.meta?{...n.meta,...a}:{...a};n.meta={...s}},deleteMessage(e,t){delete e.conversations[t]},toggleAgentTypingStatus(e,{status:t}){e.uiFlags.isAgentTyping=t==="on"},setMetaUserLastSeenAt(e,t){e.meta.userLastSeenAt=t},setLastMessageId(e){const{conversations:t}=e,a=Object.values(t).pop();if(!a)return;const{id:n}=a;e.lastMessageId=n}},qn={conversations:{},meta:{userLastSeenAt:void 0},uiFlags:{allMessagesLoaded:!1,isFetchingList:!1,isAgentTyping:!1,isCreating:!1},lastMessageId:null},Gn={namespaced:!0,state:qn,getters:Un,actions:zn,mutations:Vn},Zn={id:"",status:""},Xn={getConversationParams:e=>e},Qn={getAttributes:async({commit:e})=>{try{const{data:t}=await Wn(),{contact_last_seen_at:a}=t;e(zt,t),e("conversation/setMetaUserLastSeenAt",a,{root:!0})}catch{}},update({commit:e},t){e(Zt,t)},clearConversationAttributes:({commit:e})=>{e("CLEAR_CONVERSATION_ATTRIBUTES")}},Kn={[zt](e,t){e.id=t.id,e.status=t.status},[Zt](e,t){t.id===e.id&&(e.id=t.id,e.status=t.status)},[gn](e){e.id="",e.status=""}},Jn={namespaced:!0,state:Zn,getters:Xn,actions:Qn,mutations:Kn},At=e=>`/api/v1/${e}${window.location.search}`,Ut={create(e){return E.post(At("widget/labels"),{label:e})},destroy(e){return E.delete(At(`widget/labels/${e}`))}},jn={},er={},tr={create:async(e,t)=>{try{await Ut.create(t)}catch{}},destroy:async(e,t)=>{try{await Ut.destroy(t)}catch{}}},ar={},nr={namespaced:!0,state:jn,getters:er,actions:tr,mutations:ar},rr={create:async(e,{name:t})=>{try{await Xa.create(t)}catch{}}},sr={namespaced:!0,state:{},getters:{},actions:rr,mutations:{}},ir={update:({messageId:e,email:t,values:a})=>{const n=V.updateMessage(e);return E.patch(n.url,{contact:{email:t},message:{submitted_values:a}})}},or={uiFlags:{isUpdating:!1}},ur={getUIFlags:e=>e.uiFlags},cr={update:async({commit:e,dispatch:t,getters:{getUIFlags:a}},{email:n,messageId:s,submittedValues:r})=>{if(!a.isUpdating){e("toggleUpdateStatus",!0);try{await ir.update({email:n,messageId:s,values:r}),e("conversation/updateMessage",{id:s,content_attributes:{submitted_email:n,submitted_values:n?null:r}},{root:!0}),t("contacts/get",{},{root:!0})}catch{}e("toggleUpdateStatus",!1)}}},lr={toggleUpdateStatus(e,t){e.uiFlags.isUpdating=t}},dr={namespaced:!0,state:or,getters:ur,actions:cr,mutations:lr},It=async e=>{const t=V.getCampaigns(e);return E.get(t.url,{params:t.params})},fr=async({campaignId:e,websiteToken:t,customAttributes:a})=>{const n=V.triggerCampaign({websiteToken:t,campaignId:e,customAttributes:a});await E.post(n.url,{...n.data},{params:n.params})};class gr{constructor(){S(this,"initTimers",({campaigns:t},a)=>{this.clearTimers(),t.forEach(n=>{const{timeOnPage:s,id:r}=n;this.campaignTimers[r]=setTimeout(()=>{le.dispatch("campaign/startCampaign",{campaignId:r,websiteToken:a})},s*1e3)})});S(this,"clearTimers",()=>{this.campaignTimers.forEach(t=>{clearTimeout(t),this.campaignTimers[t]=null})});this.campaignTimers=[]}}const hr=new gr,pr=(e,t)=>{let a=e;const n=new URL(t);return a.endsWith("/")&&(a=a.slice(0,-1)+"*\\?*\\#*"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),new Ha(a).test(n.toString())},mr=({campaigns:e})=>e.map(t=>{var a,n;return{id:t.id,triggerOnlyDuringBusinessHours:t.trigger_only_during_business_hours||!1,timeOnPage:(a=t==null?void 0:t.trigger_rules)==null?void 0:a.time_on_page,url:(n=t==null?void 0:t.trigger_rules)==null?void 0:n.url}}),vr=({campaigns:e,currentURL:t,isInBusinessHours:a})=>e.filter(n=>pr(n.url,t)?n.triggerOnlyDuringBusinessHours?a:!0:!1),Pt="chatwoot_campaigns_",_r={records:[],uiFlags:{hasFetched:!1,isError:!1},activeCampaign:{}},pe=(e,t,a,n)=>{const s=mr({campaigns:e}),r=vr({campaigns:s,currentURL:t,isInBusinessHours:n});hr.initTimers({campaigns:r},a)},wr={getCampaigns:e=>e.records,getUIFlags:e=>e.uiFlags,getActiveCampaign:e=>e.activeCampaign},yr={fetchCampaigns:async({commit:e},{websiteToken:t,currentURL:a,isInBusinessHours:n})=>{try{const r=ft(`${Pt}${t}`,36e5);if(r){e("setCampaigns",r),e("setError",!1),pe(r,a,t,n);return}const{data:i}=await It(t);gt(`${Pt}${t}`,i),e("setCampaigns",i),e("setError",!1),pe(i,a,t,n)}catch{e("setError",!0)}},initCampaigns:async({getters:{getCampaigns:e,getUIFlags:t},dispatch:a},{currentURL:n,websiteToken:s,isInBusinessHours:r})=>{e.length?pe(e,n,s,r):t.hasFetched||a("fetchCampaigns",{websiteToken:s,currentURL:n,isInBusinessHours:r})},startCampaign:async({commit:e,rootState:{appConfig:{isWidgetOpen:t}}},{websiteToken:a,campaignId:n})=>{if(!t){const{data:s}=await It(a),r=s.find(i=>i.id===n);r&&e("setActiveCampaign",r)}},executeCampaign:async({commit:e},{campaignId:t,websiteToken:a,customAttributes:n})=>{try{e("conversation/setConversationUIFlag",{isCreating:!0},{root:!0}),await fr({campaignId:t,websiteToken:a,customAttributes:n}),e("setCampaignExecuted",!0),e("setActiveCampaign",{})}catch{e("setError",!0)}finally{e("conversation/setConversationUIFlag",{isCreating:!1},{root:!0})}},resetCampaign:async({commit:e})=>{try{e("setCampaignExecuted",!1),e("setActiveCampaign",{})}catch{e("setError",!0)}}},Cr={setCampaigns(e,t){e.records=t,e.uiFlags.hasFetched=!0},setActiveCampaign(e,t){e.activeCampaign=t},setError(e,t){e.uiFlags.isError=t},setHasFetched(e,t){e.uiFlags.hasFetched=t},setCampaignExecuted(e,t){e.campaignHasExecuted=t}},Tr={namespaced:!0,state:_r,getters:wr,actions:yr,mutations:Cr},Mr=async(e,t)=>{const a=V.getMostReadArticles(e,t);return E.get(a.url,{params:a.params})},Nt="chatwoot_most_read_articles_",br={records:[],uiFlags:{isError:!1,hasFetched:!1,isFetching:!1}},xr={uiFlags:e=>e.uiFlags,popularArticles:e=>e.records},Dr={fetch:async({commit:e},{slug:t,locale:a})=>{e("setIsFetching",!0),e("setError",!1);try{const n=ft(`${Nt}${t}_${a}`);if(n){e("setArticles",n);return}const{data:s}=await Mr(t,a),{payload:r=[]}=s;gt(`${Nt}${t}_${a}`,r),r.length&&e("setArticles",r)}catch{e("setError",!0)}finally{e("setIsFetching",!1)}}},Er={setArticles(e,t){e.records=t},setError(e,t){e.uiFlags.isError=t},setIsFetching(e,t){e.uiFlags.isFetching=t}},Or={namespaced:!0,state:br,getters:xr,actions:Dr,mutations:Er},le=wa({modules:{agent:fn,appConfig:_n,contacts:En,conversation:Gn,conversationAttributes:Jn,conversationLabels:nr,events:sr,globalConfig:ya,message:dr,campaign:Tr,article:Or}}),pt={computed:{useInboxAvatarForBot(){return this.channelConfig.enabledFeatures.includes("use_inbox_avatar_for_bot")},hasAConnectedAgentBot(){return!!window.chatwootWebChannel.hasAConnectedAgentBot},inboxAvatarUrl(){return window.chatwootWebChannel.avatarUrl},channelConfig(){return window.chatwootWebChannel},hasEmojiPickerEnabled(){return this.channelConfig.enabledFeatures.includes("emoji_picker")},hasAttachmentsEnabled(){return this.channelConfig.enabledFeatures.includes("attachments")},hasEndConversationEnabled(){return this.channelConfig.enabledFeatures.includes("end_conversation")},preChatFormEnabled(){return window.chatwootWebChannel.preChatFormEnabled},preChatFormOptions(){let e="";const t=window.chatwootWebChannel.preChatFormOptions||{};e=t.pre_chat_message;const{pre_chat_fields:a=[]}=t;return{preChatMessage:e,preChatFields:a}},shouldShowPreChatForm(){const{preChatFields:e}=this.preChatFormOptions,t=e.filter(a=>a.enabled).length>0;return this.preChatFormEnabled&&t}}};var we={exports:{}},ye={exports:{}},Ce={exports:{}},Te={exports:{}},Me={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){if(s.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+s.length+" present")}e.exports=t.default})(Me,Me.exports);var I=Me.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(I);function n(r){return r&&r.__esModule?r:{default:r}}function s(r){(0,a.default)(1,arguments);var i=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&i==="[object Date]"?new Date(r.getTime()):typeof r=="number"||i==="[object Number]"?new Date(r):((typeof r=="string"||i==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}e.exports=t.default})(Te,Te.exports);var Y=Te.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(Y),n=s(I);function s(i){return i&&i.__esModule?i:{default:i}}function r(i){(0,n.default)(1,arguments);var o=(0,a.default)(i);return!isNaN(o)}e.exports=t.default})(Ce,Ce.exports);var Sr=Ce.exports,be={exports:{}},xe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function n(s,r,i){i=i||{};var o;return typeof a[s]=="string"?o=a[s]:r===1?o=a[s].one:o=a[s].other.replace("{{count}}",r),i.addSuffix?i.comparison>0?"in "+o:o+" ago":o}e.exports=t.default})(xe,xe.exports);var Ar=xe.exports,De={exports:{}},Ee={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s){var r=s||{},i=r.width?String(r.width):n.defaultWidth,o=n.formats[i]||n.formats[n.defaultWidth];return o}}e.exports=t.default})(Ee,Ee.exports);var Ur=Ee.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Ur);function n(l){return l&&l.__esModule?l:{default:l}}var s={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},i={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},o={date:(0,a.default)({formats:s,defaultWidth:"full"}),time:(0,a.default)({formats:r,defaultWidth:"full"}),dateTime:(0,a.default)({formats:i,defaultWidth:"full"})},u=o;t.default=u,e.exports=t.default})(De,De.exports);var Ir=De.exports,Oe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function n(s,r,i,o){return a[s]}e.exports=t.default})(Oe,Oe.exports);var Pr=Oe.exports,Se={exports:{}},Ae={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s,r){var i=r||{},o=i.context?String(i.context):"standalone",u;if(o==="formatting"&&n.formattingValues){var l=n.defaultFormattingWidth||n.defaultWidth,h=i.width?String(i.width):l;u=n.formattingValues[h]||n.formattingValues[l]}else{var _=n.defaultWidth,y=i.width?String(i.width):n.defaultWidth;u=n.values[y]||n.values[_]}var v=n.argumentCallback?n.argumentCallback(s):s;return u[v]}}e.exports=t.default})(Ae,Ae.exports);var Nr=Ae.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(Nr);function n(v){return v&&v.__esModule?v:{default:v}}var s={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},i={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},o={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function h(v,M){var m=Number(v),c=m%100;if(c>20||c<10)switch(c%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"}var _={ordinalNumber:h,era:(0,a.default)({values:s,defaultWidth:"wide"}),quarter:(0,a.default)({values:r,defaultWidth:"wide",argumentCallback:function(v){return Number(v)-1}}),month:(0,a.default)({values:i,defaultWidth:"wide"}),day:(0,a.default)({values:o,defaultWidth:"wide"}),dayPeriod:(0,a.default)({values:u,defaultWidth:"wide",formattingValues:l,defaultFormattingWidth:"wide"})},y=_;t.default=y,e.exports=t.default})(Se,Se.exports);var Wr=Se.exports,Ue={exports:{}},Ie={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){return function(s,r){var i=String(s),o=r||{},u=i.match(n.matchPattern);if(!u)return null;var l=u[0],h=i.match(n.parsePattern);if(!h)return null;var _=n.valueCallback?n.valueCallback(h[0]):h[0];return _=o.valueCallback?o.valueCallback(_):_,{value:_,rest:i.slice(l.length)}}}e.exports=t.default})(Ie,Ie.exports);var kr=Ie.exports,Pe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(r){return function(i,o){var u=String(i),l=o||{},h=l.width,_=h&&r.matchPatterns[h]||r.matchPatterns[r.defaultMatchWidth],y=u.match(_);if(!y)return null;var v=y[0],M=h&&r.parsePatterns[h]||r.parsePatterns[r.defaultParseWidth],m;return Object.prototype.toString.call(M)==="[object Array]"?m=s(M,function(c){return c.test(v)}):m=n(M,function(c){return c.test(v)}),m=r.valueCallback?r.valueCallback(m):m,m=l.valueCallback?l.valueCallback(m):m,{value:m,rest:u.slice(v.length)}}}function n(r,i){for(var o in r)if(r.hasOwnProperty(o)&&i(r[o]))return o}function s(r,i){for(var o=0;o<r.length;o++)if(i(r[o]))return o}e.exports=t.default})(Pe,Pe.exports);var Rr=Pe.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(kr),n=s(Rr);function s(f){return f&&f.__esModule?f:{default:f}}var r=/^(\d+)(th|st|nd|rd)?/i,i=/\d+/i,o={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},l={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h={any:[/1/i,/2/i,/3/i,/4/i]},_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},y={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},M={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},c={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d={ordinalNumber:(0,a.default)({matchPattern:r,parsePattern:i,valueCallback:function(f){return parseInt(f,10)}}),era:(0,n.default)({matchPatterns:o,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,n.default)({matchPatterns:l,defaultMatchWidth:"wide",parsePatterns:h,defaultParseWidth:"any",valueCallback:function(f){return f+1}}),month:(0,n.default)({matchPatterns:_,defaultMatchWidth:"wide",parsePatterns:y,defaultParseWidth:"any"}),day:(0,n.default)({matchPatterns:v,defaultMatchWidth:"wide",parsePatterns:M,defaultParseWidth:"any"}),dayPeriod:(0,n.default)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:c,defaultParseWidth:"any"})},g=d;t.default=g,e.exports=t.default})(Ue,Ue.exports);var Fr=Ue.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(Ar),n=o(Ir),s=o(Pr),r=o(Wr),i=o(Fr);function o(h){return h&&h.__esModule?h:{default:h}}var u={code:"en-US",formatDistance:a.default,formatLong:n.default,formatRelative:s.default,localize:r.default,match:i.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},l=u;t.default=l,e.exports=t.default})(be,be.exports);var Lr=be.exports,Ne={exports:{}},We={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){if(n===null||n===!0||n===!1)return NaN;var s=Number(n);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})(We,We.exports);var K=We.exports,ke={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(K),n=r(Y),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u){(0,s.default)(2,arguments);var l=(0,n.default)(o).getTime(),h=(0,a.default)(u);return new Date(l+h)}e.exports=t.default})(ke,ke.exports);var Hr=ke.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(K),n=r(Hr),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u){(0,s.default)(2,arguments);var l=(0,a.default)(u);return(0,n.default)(o,-l)}e.exports=t.default})(Ne,Ne.exports);var Yr=Ne.exports,Re={exports:{}},Fe={exports:{}},Le={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){for(var r=n<0?"-":"",i=Math.abs(n).toString();i.length<s;)i="0"+i;return r+i}e.exports=t.default})(Le,Le.exports);var ta=Le.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(ta);function n(i){return i&&i.__esModule?i:{default:i}}var s={y:function(i,o){var u=i.getUTCFullYear(),l=u>0?u:1-u;return(0,a.default)(o==="yy"?l%100:l,o.length)},M:function(i,o){var u=i.getUTCMonth();return o==="M"?String(u+1):(0,a.default)(u+1,2)},d:function(i,o){return(0,a.default)(i.getUTCDate(),o.length)},a:function(i,o){var u=i.getUTCHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(i,o){return(0,a.default)(i.getUTCHours()%12||12,o.length)},H:function(i,o){return(0,a.default)(i.getUTCHours(),o.length)},m:function(i,o){return(0,a.default)(i.getUTCMinutes(),o.length)},s:function(i,o){return(0,a.default)(i.getUTCSeconds(),o.length)},S:function(i,o){var u=o.length,l=i.getUTCMilliseconds(),h=Math.floor(l*Math.pow(10,u-3));return(0,a.default)(h,o.length)}},r=s;t.default=r,e.exports=t.default})(Fe,Fe.exports);var $r=Fe.exports,He={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=s(Y),n=s(I);function s(o){return o&&o.__esModule?o:{default:o}}var r=864e5;function i(o){(0,n.default)(1,arguments);var u=(0,a.default)(o),l=u.getTime();u.setUTCMonth(0,1),u.setUTCHours(0,0,0,0);var h=u.getTime(),_=l-h;return Math.floor(_/r)+1}e.exports=t.default})(He,He.exports);var Br=He.exports,Ye={exports:{}},$e={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(Y),n=s(I);function s(i){return i&&i.__esModule?i:{default:i}}function r(i){(0,n.default)(1,arguments);var o=1,u=(0,a.default)(i),l=u.getUTCDay(),h=(l<o?7:0)+l-o;return u.setUTCDate(u.getUTCDate()-h),u.setUTCHours(0,0,0,0),u}e.exports=t.default})($e,$e.exports);var mt=$e.exports,Be={exports:{}},ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(Y),n=r(mt),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,s.default)(1,arguments);var u=(0,a.default)(o),l=u.getUTCFullYear(),h=new Date(0);h.setUTCFullYear(l+1,0,4),h.setUTCHours(0,0,0,0);var _=(0,n.default)(h),y=new Date(0);y.setUTCFullYear(l,0,4),y.setUTCHours(0,0,0,0);var v=(0,n.default)(y);return u.getTime()>=_.getTime()?l+1:u.getTime()>=v.getTime()?l:l-1}e.exports=t.default})(ze,ze.exports);var aa=ze.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(aa),n=r(mt),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o){(0,s.default)(1,arguments);var u=(0,a.default)(o),l=new Date(0);l.setUTCFullYear(u,0,4),l.setUTCHours(0,0,0,0);var h=(0,n.default)(l);return h}e.exports=t.default})(Be,Be.exports);var zr=Be.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(Y),n=i(mt),s=i(zr),r=i(I);function i(l){return l&&l.__esModule?l:{default:l}}var o=6048e5;function u(l){(0,r.default)(1,arguments);var h=(0,a.default)(l),_=(0,n.default)(h).getTime()-(0,s.default)(h).getTime();return Math.round(_/o)+1}e.exports=t.default})(Ye,Ye.exports);var Vr=Ye.exports,Ve={exports:{}},qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(K),n=r(Y),s=r(I);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u){(0,s.default)(1,arguments);var l=u||{},h=l.locale,_=h&&h.options&&h.options.weekStartsOn,y=_==null?0:(0,a.default)(_),v=l.weekStartsOn==null?y:(0,a.default)(l.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var M=(0,n.default)(o),m=M.getUTCDay(),c=(m<v?7:0)+m-v;return M.setUTCDate(M.getUTCDate()-c),M.setUTCHours(0,0,0,0),M}e.exports=t.default})(qe,qe.exports);var vt=qe.exports,Ge={exports:{}},Ze={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(K),n=i(Y),s=i(vt),r=i(I);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,l){(0,r.default)(1,arguments);var h=(0,n.default)(u,l),_=h.getUTCFullYear(),y=l||{},v=y.locale,M=v&&v.options&&v.options.firstWeekContainsDate,m=M==null?1:(0,a.default)(M),c=y.firstWeekContainsDate==null?m:(0,a.default)(y.firstWeekContainsDate);if(!(c>=1&&c<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var d=new Date(0);d.setUTCFullYear(_+1,0,c),d.setUTCHours(0,0,0,0);var g=(0,s.default)(d,l),f=new Date(0);f.setUTCFullYear(_,0,c),f.setUTCHours(0,0,0,0);var p=(0,s.default)(f,l);return h.getTime()>=g.getTime()?_+1:h.getTime()>=p.getTime()?_:_-1}e.exports=t.default})(Ze,Ze.exports);var na=Ze.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=i(K),n=i(na),s=i(vt),r=i(I);function i(u){return u&&u.__esModule?u:{default:u}}function o(u,l){(0,r.default)(1,arguments);var h=l||{},_=h.locale,y=_&&_.options&&_.options.firstWeekContainsDate,v=y==null?1:(0,a.default)(y),M=h.firstWeekContainsDate==null?v:(0,a.default)(h.firstWeekContainsDate),m=(0,n.default)(u,l),c=new Date(0);c.setUTCFullYear(m,0,M),c.setUTCHours(0,0,0,0);var d=(0,s.default)(c,l);return d}e.exports=t.default})(Ge,Ge.exports);var qr=Ge.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=i(Y),n=i(vt),s=i(qr),r=i(I);function i(l){return l&&l.__esModule?l:{default:l}}var o=6048e5;function u(l,h){(0,r.default)(1,arguments);var _=(0,a.default)(l),y=(0,n.default)(_,h).getTime()-(0,s.default)(_,h).getTime();return Math.round(y/o)+1}e.exports=t.default})(Ve,Ve.exports);var Gr=Ve.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l($r),n=l(Br),s=l(Vr),r=l(aa),i=l(Gr),o=l(na),u=l(ta);function l(c){return c&&c.__esModule?c:{default:c}}var h={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_={G:function(c,d,g){var f=c.getUTCFullYear()>0?1:0;switch(d){case"G":case"GG":case"GGG":return g.era(f,{width:"abbreviated"});case"GGGGG":return g.era(f,{width:"narrow"});case"GGGG":default:return g.era(f,{width:"wide"})}},y:function(c,d,g){if(d==="yo"){var f=c.getUTCFullYear(),p=f>0?f:1-f;return g.ordinalNumber(p,{unit:"year"})}return a.default.y(c,d)},Y:function(c,d,g,f){var p=(0,o.default)(c,f),b=p>0?p:1-p;if(d==="YY"){var W=b%100;return(0,u.default)(W,2)}return d==="Yo"?g.ordinalNumber(b,{unit:"year"}):(0,u.default)(b,d.length)},R:function(c,d){var g=(0,r.default)(c);return(0,u.default)(g,d.length)},u:function(c,d){var g=c.getUTCFullYear();return(0,u.default)(g,d.length)},Q:function(c,d,g){var f=Math.ceil((c.getUTCMonth()+1)/3);switch(d){case"Q":return String(f);case"QQ":return(0,u.default)(f,2);case"Qo":return g.ordinalNumber(f,{unit:"quarter"});case"QQQ":return g.quarter(f,{width:"abbreviated",context:"formatting"});case"QQQQQ":return g.quarter(f,{width:"narrow",context:"formatting"});case"QQQQ":default:return g.quarter(f,{width:"wide",context:"formatting"})}},q:function(c,d,g){var f=Math.ceil((c.getUTCMonth()+1)/3);switch(d){case"q":return String(f);case"qq":return(0,u.default)(f,2);case"qo":return g.ordinalNumber(f,{unit:"quarter"});case"qqq":return g.quarter(f,{width:"abbreviated",context:"standalone"});case"qqqqq":return g.quarter(f,{width:"narrow",context:"standalone"});case"qqqq":default:return g.quarter(f,{width:"wide",context:"standalone"})}},M:function(c,d,g){var f=c.getUTCMonth();switch(d){case"M":case"MM":return a.default.M(c,d);case"Mo":return g.ordinalNumber(f+1,{unit:"month"});case"MMM":return g.month(f,{width:"abbreviated",context:"formatting"});case"MMMMM":return g.month(f,{width:"narrow",context:"formatting"});case"MMMM":default:return g.month(f,{width:"wide",context:"formatting"})}},L:function(c,d,g){var f=c.getUTCMonth();switch(d){case"L":return String(f+1);case"LL":return(0,u.default)(f+1,2);case"Lo":return g.ordinalNumber(f+1,{unit:"month"});case"LLL":return g.month(f,{width:"abbreviated",context:"standalone"});case"LLLLL":return g.month(f,{width:"narrow",context:"standalone"});case"LLLL":default:return g.month(f,{width:"wide",context:"standalone"})}},w:function(c,d,g,f){var p=(0,i.default)(c,f);return d==="wo"?g.ordinalNumber(p,{unit:"week"}):(0,u.default)(p,d.length)},I:function(c,d,g){var f=(0,s.default)(c);return d==="Io"?g.ordinalNumber(f,{unit:"week"}):(0,u.default)(f,d.length)},d:function(c,d,g){return d==="do"?g.ordinalNumber(c.getUTCDate(),{unit:"date"}):a.default.d(c,d)},D:function(c,d,g){var f=(0,n.default)(c);return d==="Do"?g.ordinalNumber(f,{unit:"dayOfYear"}):(0,u.default)(f,d.length)},E:function(c,d,g){var f=c.getUTCDay();switch(d){case"E":case"EE":case"EEE":return g.day(f,{width:"abbreviated",context:"formatting"});case"EEEEE":return g.day(f,{width:"narrow",context:"formatting"});case"EEEEEE":return g.day(f,{width:"short",context:"formatting"});case"EEEE":default:return g.day(f,{width:"wide",context:"formatting"})}},e:function(c,d,g,f){var p=c.getUTCDay(),b=(p-f.weekStartsOn+8)%7||7;switch(d){case"e":return String(b);case"ee":return(0,u.default)(b,2);case"eo":return g.ordinalNumber(b,{unit:"day"});case"eee":return g.day(p,{width:"abbreviated",context:"formatting"});case"eeeee":return g.day(p,{width:"narrow",context:"formatting"});case"eeeeee":return g.day(p,{width:"short",context:"formatting"});case"eeee":default:return g.day(p,{width:"wide",context:"formatting"})}},c:function(c,d,g,f){var p=c.getUTCDay(),b=(p-f.weekStartsOn+8)%7||7;switch(d){case"c":return String(b);case"cc":return(0,u.default)(b,d.length);case"co":return g.ordinalNumber(b,{unit:"day"});case"ccc":return g.day(p,{width:"abbreviated",context:"standalone"});case"ccccc":return g.day(p,{width:"narrow",context:"standalone"});case"cccccc":return g.day(p,{width:"short",context:"standalone"});case"cccc":default:return g.day(p,{width:"wide",context:"standalone"})}},i:function(c,d,g){var f=c.getUTCDay(),p=f===0?7:f;switch(d){case"i":return String(p);case"ii":return(0,u.default)(p,d.length);case"io":return g.ordinalNumber(p,{unit:"day"});case"iii":return g.day(f,{width:"abbreviated",context:"formatting"});case"iiiii":return g.day(f,{width:"narrow",context:"formatting"});case"iiiiii":return g.day(f,{width:"short",context:"formatting"});case"iiii":default:return g.day(f,{width:"wide",context:"formatting"})}},a:function(c,d,g){var f=c.getUTCHours(),p=f/12>=1?"pm":"am";switch(d){case"a":case"aa":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"aaa":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"aaaa":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},b:function(c,d,g){var f=c.getUTCHours(),p;switch(f===12?p=h.noon:f===0?p=h.midnight:p=f/12>=1?"pm":"am",d){case"b":case"bb":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"bbb":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"bbbb":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},B:function(c,d,g){var f=c.getUTCHours(),p;switch(f>=17?p=h.evening:f>=12?p=h.afternoon:f>=4?p=h.morning:p=h.night,d){case"B":case"BB":case"BBB":return g.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"BBBBB":return g.dayPeriod(p,{width:"narrow",context:"formatting"});case"BBBB":default:return g.dayPeriod(p,{width:"wide",context:"formatting"})}},h:function(c,d,g){if(d==="ho"){var f=c.getUTCHours()%12;return f===0&&(f=12),g.ordinalNumber(f,{unit:"hour"})}return a.default.h(c,d)},H:function(c,d,g){return d==="Ho"?g.ordinalNumber(c.getUTCHours(),{unit:"hour"}):a.default.H(c,d)},K:function(c,d,g){var f=c.getUTCHours()%12;return d==="Ko"?g.ordinalNumber(f,{unit:"hour"}):(0,u.default)(f,d.length)},k:function(c,d,g){var f=c.getUTCHours();return f===0&&(f=24),d==="ko"?g.ordinalNumber(f,{unit:"hour"}):(0,u.default)(f,d.length)},m:function(c,d,g){return d==="mo"?g.ordinalNumber(c.getUTCMinutes(),{unit:"minute"}):a.default.m(c,d)},s:function(c,d,g){return d==="so"?g.ordinalNumber(c.getUTCSeconds(),{unit:"second"}):a.default.s(c,d)},S:function(c,d){return a.default.S(c,d)},X:function(c,d,g,f){var p=f._originalDate||c,b=p.getTimezoneOffset();if(b===0)return"Z";switch(d){case"X":return v(b);case"XXXX":case"XX":return M(b);case"XXXXX":case"XXX":default:return M(b,":")}},x:function(c,d,g,f){var p=f._originalDate||c,b=p.getTimezoneOffset();switch(d){case"x":return v(b);case"xxxx":case"xx":return M(b);case"xxxxx":case"xxx":default:return M(b,":")}},O:function(c,d,g,f){var p=f._originalDate||c,b=p.getTimezoneOffset();switch(d){case"O":case"OO":case"OOO":return"GMT"+y(b,":");case"OOOO":default:return"GMT"+M(b,":")}},z:function(c,d,g,f){var p=f._originalDate||c,b=p.getTimezoneOffset();switch(d){case"z":case"zz":case"zzz":return"GMT"+y(b,":");case"zzzz":default:return"GMT"+M(b,":")}},t:function(c,d,g,f){var p=f._originalDate||c,b=Math.floor(p.getTime()/1e3);return(0,u.default)(b,d.length)},T:function(c,d,g,f){var p=f._originalDate||c,b=p.getTime();return(0,u.default)(b,d.length)}};function y(c,d){var g=c>0?"-":"+",f=Math.abs(c),p=Math.floor(f/60),b=f%60;if(b===0)return g+String(p);var W=d;return g+String(p)+W+(0,u.default)(b,2)}function v(c,d){if(c%60===0){var g=c>0?"-":"+";return g+(0,u.default)(Math.abs(c)/60,2)}return M(c,d)}function M(c,d){var g=d||"",f=c>0?"-":"+",p=Math.abs(c),b=(0,u.default)(Math.floor(p/60),2),W=(0,u.default)(p%60,2);return f+b+g+W}var m=_;t.default=m,e.exports=t.default})(Re,Re.exports);var Zr=Re.exports,Xe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function a(o,u){switch(o){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}}function n(o,u){switch(o){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}}function s(o,u){var l=o.match(/(P+)(p+)?/),h=l[1],_=l[2];if(!_)return a(o,u);var y;switch(h){case"P":y=u.dateTime({width:"short"});break;case"PP":y=u.dateTime({width:"medium"});break;case"PPP":y=u.dateTime({width:"long"});break;case"PPPP":default:y=u.dateTime({width:"full"});break}return y.replace("{{date}}",a(h,u)).replace("{{time}}",n(_,u))}var r={p:n,P:s},i=r;t.default=i,e.exports=t.default})(Xe,Xe.exports);var Xr=Xe.exports,Qe={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n){var s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),n.getTime()-s.getTime()}e.exports=t.default})(Qe,Qe.exports);var ra=Qe.exports,re={};Object.defineProperty(re,"__esModule",{value:!0});re.isProtectedDayOfYearToken=Jr;re.isProtectedWeekYearToken=jr;re.throwProtectedError=es;var Qr=["D","DD"],Kr=["YY","YYYY"];function Jr(e){return Qr.indexOf(e)!==-1}function jr(e){return Kr.indexOf(e)!==-1}function es(e,t,a){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"))}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var a=y(Sr),n=y(Lr),s=y(Yr),r=y(Y),i=y(Zr),o=y(Xr),u=y(ra),l=re,h=y(K),_=y(I);function y(p){return p&&p.__esModule?p:{default:p}}var v=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,m=/^'([^]*?)'?$/,c=/''/g,d=/[a-zA-Z]/;function g(p,b,W){(0,_.default)(2,arguments);var q=String(b),T=W||{},w=T.locale||n.default,C=w.options&&w.options.firstWeekContainsDate,x=C==null?1:(0,h.default)(C),D=T.firstWeekContainsDate==null?x:(0,h.default)(T.firstWeekContainsDate);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=w.options&&w.options.weekStartsOn,$=O==null?0:(0,h.default)(O),G=T.weekStartsOn==null?$:(0,h.default)(T.weekStartsOn);if(!(G>=0&&G<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var R=(0,r.default)(p);if(!(0,a.default)(R))throw new RangeError("Invalid time value");var j=(0,u.default)(R),Z=(0,s.default)(R,j),B={firstWeekContainsDate:D,weekStartsOn:G,locale:w,_originalDate:R},ha=q.match(M).map(function(P){var X=P[0];if(X==="p"||X==="P"){var ie=o.default[X];return ie(P,w.formatLong,B)}return P}).join("").match(v).map(function(P){if(P==="''")return"'";var X=P[0];if(X==="'")return f(P);var ie=i.default[X];if(ie)return!T.useAdditionalWeekYearTokens&&(0,l.isProtectedWeekYearToken)(P)&&(0,l.throwProtectedError)(P,b,p),!T.useAdditionalDayOfYearTokens&&(0,l.isProtectedDayOfYearToken)(P)&&(0,l.throwProtectedError)(P,b,p),ie(Z,P,w.localize,B);if(X.match(d))throw new RangeError("Format string contains an unescaped latin alphabet character `"+X+"`");return P}).join("");return ha}function f(p){return p.match(m)[1].replace(c,"'")}e.exports=t.default})(ye,ye.exports);var ts=ye.exports,Ke={exports:{}},Je={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(i,o,u){var l=r(i,u.timeZone,u.locale);return l.formatToParts?n(l,o):s(l,o)}function n(i,o){for(var u=i.formatToParts(o),l=u.length-1;l>=0;--l)if(u[l].type==="timeZoneName")return u[l].value}function s(i,o){var u=i.format(o).replace(/\u200E/g,""),l=/ [\w-+ ]+$/.exec(u);return l?l[0].substr(1):""}function r(i,o,u){if(u&&!u.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(u?[u.code,"en-US"]:void 0,{timeZone:o,timeZoneName:i})}e.exports=t.default})(Je,Je.exports);var as=Je.exports,je={exports:{}},et={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(u,l){var h=o(l);return h.formatToParts?s(h,u):r(h,u)}var n={year:0,month:1,day:2,hour:3,minute:4,second:5};function s(u,l){try{for(var h=u.formatToParts(l),_=[],y=0;y<h.length;y++){var v=n[h[y].type];v>=0&&(_[v]=parseInt(h[y].value,10))}return _}catch(M){if(M instanceof RangeError)return[NaN];throw M}}function r(u,l){var h=u.format(l).replace(/\u200E/g,""),_=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(h);return[_[3],_[1],_[2],_[4],_[5],_[6]]}var i={};function o(u){if(!i[u]){var l=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),h=l==="06/25/2014, 00:00:00"||l==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";i[u]=h?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:u,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return i[u]}e.exports=t.default})(et,et.exports);var ns=et.exports,tt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s,r,i,o,u,l){var h=new Date(0);return h.setUTCFullYear(n,s,r),h.setUTCHours(i,o,u,l),h}e.exports=t.default})(tt,tt.exports);var sa=tt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=s(ns),n=s(sa);function s(m){return m&&m.__esModule?m:{default:m}}var r=36e5,i=6e4,o={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function u(m,c,d){var g,f;if(!m||(g=o.timezoneZ.exec(m),g))return 0;var p;if(g=o.timezoneHH.exec(m),g)return p=parseInt(g[1],10),y(p)?-(p*r):NaN;if(g=o.timezoneHHMM.exec(m),g){p=parseInt(g[1],10);var b=parseInt(g[2],10);return y(p,b)?(f=Math.abs(p)*r+b*i,p>0?-f:f):NaN}if(M(m)){c=new Date(c||Date.now());var W=d?c:l(c),q=h(W,m),T=d?q:_(c,q,m);return-T}return NaN}function l(m){return(0,n.default)(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds())}function h(m,c){var d=(0,a.default)(m,c),g=(0,n.default)(d[0],d[1]-1,d[2],d[3]%24,d[4],d[5],0).getTime(),f=m.getTime(),p=f%1e3;return f-=p>=0?p:1e3+p,g-f}function _(m,c,d){var g=m.getTime(),f=g-c,p=h(new Date(f),d);if(c===p)return c;f-=p-c;var b=h(new Date(f),d);return p===b?p:Math.max(p,b)}function y(m,c){return-23<=m&&m<=23&&(c==null||0<=c&&c<=59)}var v={};function M(m){if(v[m])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:m}),v[m]=!0,!0}catch{return!1}}e.exports=t.default})(je,je.exports);var se=je.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(as),n=s(se);function s(v){return v&&v.__esModule?v:{default:v}}var r=60*1e3,i={X:function(v,M,m,c){var d=o(c.timeZone,c._originalDate||v);if(d===0)return"Z";switch(M){case"X":return h(d);case"XXXX":case"XX":return l(d);case"XXXXX":case"XXX":default:return l(d,":")}},x:function(v,M,m,c){var d=o(c.timeZone,c._originalDate||v);switch(M){case"x":return h(d);case"xxxx":case"xx":return l(d);case"xxxxx":case"xxx":default:return l(d,":")}},O:function(v,M,m,c){var d=o(c.timeZone,c._originalDate||v);switch(M){case"O":case"OO":case"OOO":return"GMT"+_(d,":");case"OOOO":default:return"GMT"+l(d,":")}},z:function(v,M,m,c){var d=c._originalDate||v;switch(M){case"z":case"zz":case"zzz":return(0,a.default)("short",d,c);case"zzzz":default:return(0,a.default)("long",d,c)}}};function o(v,M){var m=v?(0,n.default)(v,M,!0)/r:M.getTimezoneOffset();if(Number.isNaN(m))throw new RangeError("Invalid time zone specified: "+v);return m}function u(v,M){for(var m=v<0?"-":"",c=Math.abs(v).toString();c.length<M;)c="0"+c;return m+c}function l(v,M){var m=M||"",c=v>0?"-":"+",d=Math.abs(v),g=u(Math.floor(d/60),2),f=u(Math.floor(d%60),2);return c+g+m+f}function h(v,M){if(v%60===0){var m=v>0?"-":"+";return m+u(Math.abs(v)/60,2)}return l(v,M)}function _(v,M){var m=v>0?"-":"+",c=Math.abs(v),d=Math.floor(c/60),g=c%60;if(g===0)return m+String(d);var f=M;return m+String(d)+f+u(g,2)}var y=i;t.default=y,e.exports=t.default})(Ke,Ke.exports);var rs=Ke.exports,at={exports:{}},nt={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,n=a;t.default=n,e.exports=t.default})(nt,nt.exports);var ia=nt.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var a=i(K),n=i(ra),s=i(se),r=i(ia);function i(T){return T&&T.__esModule?T:{default:T}}var o=36e5,u=6e4,l=2,h={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:r.default};function _(T,w){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(T===null)return new Date(NaN);var C=w||{},x=C.additionalDigits==null?l:(0,a.default)(C.additionalDigits);if(x!==2&&x!==1&&x!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(T instanceof Date||typeof T=="object"&&Object.prototype.toString.call(T)==="[object Date]")return new Date(T.getTime());if(typeof T=="number"||Object.prototype.toString.call(T)==="[object Number]")return new Date(T);if(!(typeof T=="string"||Object.prototype.toString.call(T)==="[object String]"))return new Date(NaN);var D=y(T),O=v(D.date,x),$=O.year,G=O.restDateString,R=M(G,$);if(isNaN(R))return new Date(NaN);if(R){var j=R.getTime(),Z=0,B;if(D.time&&(Z=m(D.time),isNaN(Z)))return new Date(NaN);if(D.timeZone||C.timeZone){if(B=(0,s.default)(D.timeZone||C.timeZone,new Date(j+Z)),isNaN(B))return new Date(NaN)}else B=(0,n.default)(new Date(j+Z)),B=(0,n.default)(new Date(j+Z+B));return new Date(j+Z+B)}else return new Date(NaN)}function y(T){var w={},C=h.dateTimePattern.exec(T),x;if(C?(w.date=C[1],x=C[3]):(C=h.datePattern.exec(T),C?(w.date=C[1],x=C[2]):(w.date=null,x=T)),x){var D=h.timeZone.exec(x);D?(w.time=x.replace(D[1],""),w.timeZone=D[1].trim()):w.time=x}return w}function v(T,w){var C=h.YYY[w],x=h.YYYYY[w],D;if(D=h.YYYY.exec(T)||x.exec(T),D){var O=D[1];return{year:parseInt(O,10),restDateString:T.slice(O.length)}}if(D=h.YY.exec(T)||C.exec(T),D){var $=D[1];return{year:parseInt($,10)*100,restDateString:T.slice($.length)}}return{year:null}}function M(T,w){if(w===null)return null;var C,x,D,O;if(T.length===0)return x=new Date(0),x.setUTCFullYear(w),x;if(C=h.MM.exec(T),C)return x=new Date(0),D=parseInt(C[1],10)-1,p(w,D)?(x.setUTCFullYear(w,D),x):new Date(NaN);if(C=h.DDD.exec(T),C){x=new Date(0);var $=parseInt(C[1],10);return b(w,$)?(x.setUTCFullYear(w,0,$),x):new Date(NaN)}if(C=h.MMDD.exec(T),C){x=new Date(0),D=parseInt(C[1],10)-1;var G=parseInt(C[2],10);return p(w,D,G)?(x.setUTCFullYear(w,D,G),x):new Date(NaN)}if(C=h.Www.exec(T),C)return O=parseInt(C[1],10)-1,W(w,O)?c(w,O):new Date(NaN);if(C=h.WwwD.exec(T),C){O=parseInt(C[1],10)-1;var R=parseInt(C[2],10)-1;return W(w,O,R)?c(w,O,R):new Date(NaN)}return null}function m(T){var w,C,x;if(w=h.HH.exec(T),w)return C=parseFloat(w[1].replace(",",".")),q(C)?C%24*o:NaN;if(w=h.HHMM.exec(T),w)return C=parseInt(w[1],10),x=parseFloat(w[2].replace(",",".")),q(C,x)?C%24*o+x*u:NaN;if(w=h.HHMMSS.exec(T),w){C=parseInt(w[1],10),x=parseInt(w[2],10);var D=parseFloat(w[3].replace(",","."));return q(C,x,D)?C%24*o+x*u+D*1e3:NaN}return null}function c(T,w,C){w=w||0,C=C||0;var x=new Date(0);x.setUTCFullYear(T,0,4);var D=x.getUTCDay()||7,O=w*7+C+1-D;return x.setUTCDate(x.getUTCDate()+O),x}var d=[31,28,31,30,31,30,31,31,30,31,30,31],g=[31,29,31,30,31,30,31,31,30,31,30,31];function f(T){return T%400===0||T%4===0&&T%100!==0}function p(T,w,C){if(w<0||w>11)return!1;if(C!=null){if(C<1)return!1;var x=f(T);if(x&&C>g[w]||!x&&C>d[w])return!1}return!0}function b(T,w){if(w<1)return!1;var C=f(T);return!(C&&w>366||!C&&w>365)}function W(T,w,C){return!(w<0||w>52||C!=null&&(C<0||C>6))}function q(T,w,C){return!(T!=null&&(T<0||T>=25)||w!=null&&(w<0||w>=60)||C!=null&&(C<0||C>=60))}e.exports=t.default})(at,at.exports);var de=at.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=r(ts),n=r(rs),s=r(de);function r(u){return u&&u.__esModule?u:{default:u}}var i=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function o(u,l,h){var _=String(l),y=h||{},v=_.match(i);if(v){var M=(0,s.default)(u,y);_=v.reduce(function(m,c){if(c[0]==="'")return m;var d=m.indexOf(c),g=m[d-1]==="'",f=m.replace(c,"'"+n.default[c[0]](M,c,null,y)+"'");return g?f.substring(0,d-1)+f.substring(d+1):f},_)}return(0,a.default)(u,_,y)}e.exports=t.default})(we,we.exports);var oa=we.exports,rt={exports:{}},st={exports:{}},it={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(n,s){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");s=s||{};for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r]);return n}e.exports=t.default})(it,it.exports);var ss=it.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(ss);function n(r){return r&&r.__esModule?r:{default:r}}function s(r){return(0,a.default)({},r)}e.exports=t.default})(st,st.exports);var ua=st.exports,ot={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=s(se),n=s(de);function s(i){return i&&i.__esModule?i:{default:i}}function r(i,o,u){var l=(0,n.default)(i,u),h=(0,a.default)(o,l,!0),_=new Date(l.getTime()-h),y=new Date(0);return y.setFullYear(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()),y.setHours(_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()),y}e.exports=t.default})(ot,ot.exports);var ca=ot.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(ua),n=r(oa),s=r(ca);function r(o){return o&&o.__esModule?o:{default:o}}function i(o,u,l,h){var _=(0,a.default)(h);return _.timeZone=u,(0,n.default)((0,s.default)(o,u),l,_)}e.exports=t.default})(rt,rt.exports);var is=rt.exports,ut={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var a=n(se);function n(r){return r&&r.__esModule?r:{default:r}}function s(r,i){return-(0,a.default)(r,i)}e.exports=t.default})(ut,ut.exports);var os=ut.exports,ct={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=o(ua),n=o(de),s=o(ia),r=o(se),i=o(sa);function o(l){return l&&l.__esModule?l:{default:l}}function u(l,h,_){if(typeof l=="string"&&!l.match(s.default)){var y=(0,a.default)(_);return y.timeZone=h,(0,n.default)(l,y)}var v=(0,n.default)(l,_),M=(0,i.default)(v.getFullYear(),v.getMonth(),v.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()).getTime(),m=(0,r.default)(h,new Date(M));return new Date(M+m)}e.exports=t.default})(ct,ct.exports);var us=ct.exports,la={format:oa,formatInTimeZone:is,getTimezoneOffset:os,toDate:de,utcToZonedTime:ca,zonedTimeToUtc:us};const da={computed:{channelConfig(){return window.chatwootWebChannel},replyTime(){return window.chatwootWebChannel.replyTime},replyTimeStatus(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_few_hours":return this.$t("REPLY_TIME.IN_A_FEW_HOURS");case"in_a_day":return this.$t("REPLY_TIME.IN_A_DAY");default:return this.$t("REPLY_TIME.IN_A_FEW_HOURS")}},replyWaitMessage(){const{workingHoursEnabled:e}=this.channelConfig;return e?this.isOnline?this.replyTimeStatus:`${this.$t("REPLY_TIME.BACK_IN")} ${this.timeLeftToBackInOnline}`:this.isOnline?this.replyTimeStatus:this.$t("TEAM_AVAILABILITY.OFFLINE")},outOfOfficeMessage(){return this.channelConfig.outOfOfficeMessage},isInBetweenTheWorkingHours(){const{openHour:e,openMinute:t,closeHour:a,closeMinute:n,closedAllDay:s,openAllDay:r}=this.currentDayAvailability;if(r)return!0;if(s)return!1;const{utcOffset:i}=this.channelConfig,o=this.getDateWithOffset(i),u=o.getHours(),l=o.getMinutes(),h=Tt(u,l,e,t),_=Tt(a,n,u,l);return h&&_},currentDayAvailability(){const{utcOffset:e}=this.channelConfig,t=this.getDateWithOffset(e).getDay(),[a={}]=this.channelConfig.workingHours.filter(n=>n.day_of_week===t);return{closedAllDay:a.closed_all_day,openHour:a.open_hour,openMinute:a.open_minutes,closeHour:a.close_hour,closeMinute:a.close_minutes,openAllDay:a.open_all_day}},isInBusinessHours(){const{workingHoursEnabled:e}=this.channelConfig;return e?this.isInBetweenTheWorkingHours:!0}},methods:{getDateWithOffset(e){return la.utcToZonedTime(new Date().toISOString(),e)}}},fa={methods:{async replaceRoute(e,t={}){if(this.$route.name!==e)return this.$router.replace({name:e,params:t})}}},Wt=()=>({event:"loaded",config:{authToken:window.authToken,channelConfig:window.chatwootWebChannel}}),cs=()=>{const e=document.querySelector(".unread-messages"),t=document.querySelector(".close-unread-wrap"),a=document.querySelector(".open-read-view-wrap");if(!e)return 0;let n=48+e.scrollHeight;return t&&(n+=t.scrollHeight),a&&(n+=a.scrollHeight),n},ls=e=>{const{previous_changes:t}=e;return!t||!Object.keys(t).includes("content_attributes")?!1:Object.keys(t.content_attributes[1]||{}).includes("submitted_values")},ds=e=>e==="auto",fs=e=>e==="dark",gs=()=>{var e;return((e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)??!1},hs=(e,t)=>ds(e)?t:fs(e);function ps(){const e=Ya("appConfig/darkMode"),t=me(gs),a=me(()=>hs(e.value,t.value));return{darkMode:e,prefersDarkMode:a}}const ms={name:"App",components:{Spinner:Ca},mixins:[da,pt,fa],setup(){const{prefersDarkMode:e}=ps();return{prefersDarkMode:e}},data(){return{isMobile:!1,campaignsSnoozedTill:void 0}},computed:{...lt({activeCampaign:"campaign/getActiveCampaign",conversationSize:"conversation/getConversationSize",hideMessageBubble:"appConfig/getHideMessageBubble",isFetchingList:"conversation/getIsFetchingList",isRightAligned:"appConfig/isRightAligned",isWidgetOpen:"appConfig/getIsWidgetOpen",messageCount:"conversation/getMessageCount",unreadMessageCount:"conversation/getUnreadMessageCount",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat",showUnreadMessagesDialog:"appConfig/getShowUnreadMessagesDialog"}),isIFrame(){return A.isIFrame()},isRNWebView(){return ce.isRNWebView()},isRTL(){return this.$root.$i18n.locale?Pa(this.$root.$i18n.locale):!1}},watch:{activeCampaign(){this.setCampaignView()},isRTL:{immediate:!0,handler(e){document.documentElement.dir=e?"rtl":"ltr"}}},mounted(){const{websiteToken:e,locale:t,widgetColor:a}=window.chatwootWebChannel;this.setLocale(t),this.setWidgetColor(a),$t(window.authToken),this.isIFrame?(this.registerListeners(),this.sendLoadedEvent()):(this.fetchOldConversations(),this.fetchAvailableAgents(e),this.setLocale(xa(window.location.search))),this.isRNWebView&&(this.registerListeners(),this.sendRNWebViewLoadedEvent()),this.$store.dispatch("conversationAttributes/getAttributes"),this.registerUnreadEvents(),this.registerCampaignEvents()},methods:{...oe("appConfig",["setAppConfig","setReferrerHost","setWidgetColor","setBubbleVisibility","setColorScheme"]),...oe("conversation",["fetchOldConversations"]),...oe("campaign",["initCampaigns","executeCampaign","resetCampaign"]),...oe("agent",["fetchAvailableAgents"]),scrollConversationToBottom(){const e=this.$el.querySelector(".conversation-wrap");e.scrollTop=e.scrollHeight},setBubbleLabel(){A.sendMessage({event:"setBubbleLabel",label:this.$t("BUBBLE.LABEL")})},setIframeHeight(e){this.$nextTick(()=>{const t=cs();A.sendMessage({event:"updateIframeHeight",isFixedHeight:e,extraHeight:t})})},setLocale(e){if(!e)return;const{enabledLanguages:t}=window.chatwootWebChannel,a=e.split("_")[0],n=t.some(r=>r.iso_639_1_code===a);t.some(r=>r.iso_639_1_code===e)?this.$root.$i18n.locale=e:n&&(this.$root.$i18n.locale=a)},registerUnreadEvents(){z.on(ea,()=>{const{name:e}=this.$route;(this.isWidgetOpen||!this.isIFrame)&&e==="messages"&&this.$store.dispatch("conversation/setUserLastSeen"),this.setUnreadView()}),z.on(Yn,()=>{this.replaceRoute("messages").then(()=>this.unsetUnreadView())})},registerCampaignEvents(){z.on($n,()=>{this.shouldShowPreChatForm?this.replaceRoute("prechat-form"):(this.replaceRoute("messages"),z.emit("execute-campaign",{campaignId:this.activeCampaign.id})),this.unsetUnreadView()}),z.on("execute-campaign",e=>{const{customAttributes:t,campaignId:a}=e,{websiteToken:n}=window.chatwootWebChannel;this.executeCampaign({campaignId:a,websiteToken:n,customAttributes:t}),this.replaceRoute("messages")}),z.on("snooze-campaigns",()=>{const e=Da(new Date,1);this.campaignsSnoozedTill=Number(e)})},setCampaignView(){const{messageCount:e,activeCampaign:t}=this,a=this.campaignsSnoozedTill&&this.campaignsSnoozedTill>Date.now(),n=!wn(t)&&!e&&!a;this.isIFrame&&n&&this.replaceRoute("campaigns").then(()=>{this.setIframeHeight(!0),A.sendMessage({event:"setUnreadMode"})})},setUnreadView(){const{unreadMessageCount:e}=this;this.showUnreadMessagesDialog?this.isIFrame&&e>0&&!this.isWidgetOpen&&(this.replaceRoute("unread-messages").then(()=>{this.setIframeHeight(!0),A.sendMessage({event:"setUnreadMode"})}),this.handleUnreadNotificationDot()):this.handleUnreadNotificationDot()},unsetUnreadView(){this.isIFrame&&(A.sendMessage({event:"resetUnreadMode"}),this.setIframeHeight(!1),this.handleUnreadNotificationDot())},handleUnreadNotificationDot(){const{unreadMessageCount:e}=this;this.isIFrame&&A.sendMessage({event:"handleNotificationDot",unreadMessageCount:e})},createWidgetEvents(e){const{eventName:t}=e;t==="webwidget.triggered"&&["unread-messages","campaigns"].includes(this.$route.name)||this.$store.dispatch("events/create",{name:t})},registerListeners(){const{websiteToken:e}=window.chatwootWebChannel;window.addEventListener("message",t=>{if(!A.isAValidEvent(t))return;const a=A.getMessage(t);if(a.event==="config-set")this.setLocale(a.locale),this.setBubbleLabel(),this.fetchOldConversations().then(()=>this.setUnreadView()),this.fetchAvailableAgents(e),this.setAppConfig(a),this.$store.dispatch("contacts/get"),this.setCampaignReadData(a.campaignsSnoozedTill);else if(a.event==="widget-visible")this.scrollConversationToBottom();else if(a.event==="change-url"){const{referrerURL:n,referrerHost:s}=a;this.initCampaigns({currentURL:n,websiteToken:e,isInBusinessHours:this.isInBusinessHours}),window.referrerURL=n,this.setReferrerHost(s)}else if(a.event==="toggle-close-button")this.isMobile=a.isMobile;else if(a.event==="push-event")this.createWidgetEvents(a);else if(a.event==="set-label")this.$store.dispatch("conversationLabels/create",a.label);else if(a.event==="remove-label")this.$store.dispatch("conversationLabels/destroy",a.label);else if(a.event==="set-user")this.$store.dispatch("contacts/setUser",a);else if(a.event==="set-custom-attributes")this.$store.dispatch("contacts/setCustomAttributes",a.customAttributes);else if(a.event==="delete-custom-attribute")this.$store.dispatch("contacts/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-conversation-custom-attributes")this.$store.dispatch("conversation/setCustomAttributes",a.customAttributes);else if(a.event==="delete-conversation-custom-attribute")this.$store.dispatch("conversation/deleteCustomAttribute",a.customAttribute);else if(a.event==="set-locale")this.setLocale(a.locale),this.setBubbleLabel();else if(a.event==="set-color-scheme")this.setColorScheme(a.darkMode);else if(a.event==="toggle-open"){this.$store.dispatch("appConfig/toggleWidgetOpen",a.isOpen);const n=["home"].includes(this.$route.name)&&a.isOpen&&this.messageCount,s=!a.isOpen&&["unread-messages","campaigns"].includes(this.$route.name);n&&this.replaceRoute("messages"),s&&(this.$store.dispatch("conversation/setUserLastSeen"),this.unsetUnreadView(),this.replaceRoute("home")),a.isOpen||this.resetCampaign()}else a.event===Ea&&this.setBubbleVisibility(a.hideMessageBubble)})},sendLoadedEvent(){A.sendMessage(Wt())},sendRNWebViewLoadedEvent(){ce.sendMessage(Wt())},setCampaignReadData(e){e&&(this.campaignsSnoozedTill=Number(e))}}};function vs(e,t,a,n,s,r){const i=F("Spinner"),o=F("router-view");return!e.conversationSize&&e.isFetchingList?(U(),k("div",{key:0,class:Q(["flex items-center justify-center flex-1 h-full bg-n-background",{dark:n.prefersDarkMode}])},[L(i,{size:""})],2)):(U(),k("div",{key:1,class:Q(["flex flex-col justify-end h-full",{"is-mobile":s.isMobile,"is-widget-right":e.isRightAligned,"is-bubble-hidden":e.hideMessageBubble,"is-flat-design":e.isWidgetStyleFlat,dark:n.prefersDarkMode}])},[L(o)],2))}const _s=ne(ms,[["render",vs]]),ws=()=>{A.sendMessage({event:"playAudio"})},kt=(e,t)=>{const{conversation_id:a}=t,n=e["conversationAttributes/getConversationParams"].id;return n&&a!==n};class _t extends $a{constructor(a,n){super(a,n);S(this,"onDisconnected",()=>{this.setLastMessageId()});S(this,"onReconnect",()=>{this.syncLatestMessages()});S(this,"setLastMessageId",()=>{this.app.$store.dispatch("conversation/setLastMessageId")});S(this,"syncLatestMessages",()=>{this.app.$store.dispatch("conversation/syncLatestMessages")});S(this,"onStatusChange",a=>{a.status==="resolved"&&this.app.$store.dispatch("campaign/resetCampaign"),this.app.$store.dispatch("conversationAttributes/update",a)});S(this,"onMessageCreated",a=>{kt(this.app.$store.getters,a)||(this.app.$store.dispatch("conversation/addOrUpdateMessage",a).then(()=>z.emit(ea)),A.sendMessage({event:"onEvent",eventIdentifier:yt,data:a}),a.sender_type==="User"&&ws())});S(this,"onMessageUpdated",a=>{kt(this.app.$store.getters,a)||(ls(a)&&A.sendMessage({event:"onEvent",eventIdentifier:yt,data:a}),this.app.$store.dispatch("conversation/addOrUpdateMessage",a))});S(this,"onConversationCreated",()=>{this.app.$store.dispatch("conversationAttributes/getAttributes")});S(this,"onPresenceUpdate",a=>{this.app.$store.dispatch("agent/updatePresence",a.users)});S(this,"onContactMerge",a=>{const{pubsub_token:n}=a;_t.refreshConnector(n)});S(this,"onTypingOn",a=>{const n=this.app.$store.getters["conversationAttributes/getConversationParams"].id;a.conversation&&a.conversation.id!==n||a.is_private||(this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"on"}),this.initTimer())});S(this,"onTypingOff",()=>{this.clearTimer(),this.app.$store.dispatch("conversation/toggleAgentTyping",{status:"off"})});S(this,"clearTimer",()=>{this.CancelTyping&&(clearTimeout(this.CancelTyping),this.CancelTyping=null)});S(this,"initTimer",()=>{this.CancelTyping=setTimeout(()=>{this.onTypingOff()},3e4)});this.events={"message.created":this.onMessageCreated,"message.updated":this.onMessageUpdated,"conversation.typing_on":this.onTypingOn,"conversation.typing_off":this.onTypingOff,"conversation.status_changed":this.onStatusChange,"conversation.created":this.onConversationCreated,"presence.update":this.onPresenceUpdate,"contact.merged":this.onContactMerge}}}const ys={data(){return{showBannerMessage:!1,bannerMessage:"",bannerType:"error"}},mounted(){z.on(Na.SHOW_ALERT,({message:e,type:t="error"})=>{this.bannerMessage=e,this.bannerType=t,this.showBannerMessage=!0,setTimeout(()=>{this.showBannerMessage=!1},3e3)})}};function Cs(e,t,a,n,s,r){return s.showBannerMessage?(U(),k("div",{key:0,class:Q(`banner ${s.bannerType}`)},[N("span",null,Ft(s.bannerMessage),1)],2)):H("",!0)}const Ts=ne(ys,[["render",Cs],["__scopeId","data-v-604e405a"]]),Rt=5,Ms={data(){return{dayNames:[this.$t("DAY_NAMES.SUNDAY"),this.$t("DAY_NAMES.MONDAY"),this.$t("DAY_NAMES.TUESDAY"),this.$t("DAY_NAMES.WEDNESDAY"),this.$t("DAY_NAMES.THURSDAY"),this.$t("DAY_NAMES.FRIDAY"),this.$t("DAY_NAMES.SATURDAY")],timeSlots:[...Mt],timeSlot:{}}},computed:{channelConfig(){return window.chatwootWebChannel},workingHours(){return this.channelConfig.workingHours},newDateWithTimeZone(){return la.utcToZonedTime(new Date,this.timeZoneValue)},presentHour(){return this.newDateWithTimeZone.getHours()},presentMinute(){return this.newDateWithTimeZone.getMinutes()},currentDay(){const t=this.newDateWithTimeZone.getDay(),a=Object.keys(this.dayNames).find(n=>this.dayNames[n]===this.dayNames[t]);return Number(a)},timeZoneValue(){return this.channelConfig.timezone},languageCode(){return window.chatwootWebChannel.locale},currentDayWorkingHours(){return this.workingHours.find(e=>e.day_of_week===this.currentDay)},nextDayWorkingHours(){let e=this.getNextDay(this.currentDay),t=this.getNextWorkingHour(e);for(;!t;)e=this.getNextDay(e),t=this.getNextWorkingHour(e);return t},currentDayTimings(){const{open_hour:e,open_minutes:t,close_hour:a}=this.currentDayWorkingHours??{};return{openHour:e,openMinute:t,closeHour:a}},nextDayTimings(){const{open_hour:e,open_minutes:t}=this.nextDayWorkingHours??{};return{openHour:e,openMinute:t}},dayDiff(){const e=this.nextDayWorkingHours.day_of_week;return e>this.currentDay?e-this.currentDay-1:6-this.currentDay+e},dayNameOfNextWorkingDay(){return this.dayNames[this.nextDayWorkingHours.day_of_week]},hoursAndMinutesBackInOnline(){return this.presentHour>=this.currentDayTimings.closeHour?this.getHoursAndMinutesUntilNextDayOpen(this.nextDayWorkingHours.open_all_day?0:this.nextDayTimings.openHour,this.nextDayTimings.openMinute,this.currentDayTimings.closeHour):this.getHoursAndMinutesUntilNextDayOpen(this.currentDayTimings.openHour,this.currentDayTimings.openMinute,this.currentDayTimings.closeHour)},exactTimeInAmPm(){return`${this.timeSlot.day===this.currentDay?`at ${this.timeSlot.from}`:""}`},hoursAndMinutesLeft(){const{hoursLeft:e,minutesLeft:t}=this.hoursAndMinutesBackInOnline,a=[];if(e>0){const n=t>0?e+1:e,s=he(n,"hour",this.languageCode);a.push(`${s}`)}if(t>0&&e===0){const n=Math.ceil(t/Rt)*Rt,s=he(n,"minutes",this.languageCode);a.push(`${s}`)}return a.join(" ")},hoursAndMinutesToBack(){const{hoursLeft:e,minutesLeft:t}=this.hoursAndMinutesBackInOnline;return e>=3?this.exactTimeInAmPm:e>0||t>0?this.hoursAndMinutesLeft:"in some time"},timeLeftToBackInOnline(){return this.hoursAndMinutesBackInOnline.hoursLeft>=24||this.timeSlot.day!==this.currentDay&&this.dayDiff===0?`${he(this.dayDiff+1,"days",this.languageCode)}`:this.dayDiff>=1&&this.presentHour>=this.currentDayTimings.closeHour?`on ${this.dayNameOfNextWorkingDay}`:this.hoursAndMinutesToBack}},mounted(){this.setTimeSlot()},methods:{getNextDay(e){return(e+1)%7},getNextWorkingHour(e){const t=this.workingHours.find(a=>a.day_of_week===e);return t&&!t.closed_all_day?t:null},getHoursAndMinutesUntilNextDayOpen(e,t,a){a<e&&(e+=24);let n=e*60+t-(this.presentHour*60+this.presentMinute);n=n<0?n+24*60:n;const[s,r]=[Math.floor(n/60),n%60];return{hoursLeft:s,minutesLeft:r}},setTimeSlot(){const e=this.workingHours,t=this.presentHour>=this.currentDayTimings.closeHour?this.nextDayWorkingHours:this.currentDayWorkingHours,a=bt(e).length?bt(e):Mt;this.timeSlots=a,this.timeSlot=this.timeSlots.find(n=>n.day===t.day_of_week)}}},bs={name:"HeaderActions",components:{FluentIcon:Yt},mixins:[pt],props:{showPopoutButton:{type:Boolean,default:!1},showEndConversationButton:{type:Boolean,default:!0}},computed:{...lt({conversationAttributes:"conversationAttributes/getConversationParams"}),canLeaveConversation(){return[ge.OPEN,ge.SNOOZED,ge.PENDING].includes(this.conversationStatus)},isIframe(){return A.isIFrame()},isRNWebView(){return ce.isRNWebView()},showHeaderActions(){return this.isIframe||this.isRNWebView||this.hasWidgetOptions},conversationStatus(){return this.conversationAttributes.status},hasWidgetOptions(){return this.showPopoutButton||this.conversationStatus==="open"}},methods:{popoutWindow(){this.closeWindow();const{location:{origin:e},chatwootWebChannel:{websiteToken:t},authToken:a}=window;Oa(e,t,this.$root.$i18n.locale,a)},closeWindow(){A.isIFrame()?A.sendMessage({event:"closeWindow"}):ce.sendMessage({type:"close-widget"})},resolveConversation(){this.$store.dispatch("conversation/resolveConversation")}}},xs={key:0,class:"actions flex items-center gap-3"},Ds=["title"];function Es(e,t,a,n,s,r){const i=F("FluentIcon");return r.showHeaderActions?(U(),k("div",xs,[r.canLeaveConversation&&e.hasEndConversationEnabled&&a.showEndConversationButton?(U(),k("button",{key:0,class:"button transparent compact",title:e.$t("END_CONVERSATION"),onClick:t[0]||(t[0]=(...o)=>r.resolveConversation&&r.resolveConversation(...o))},[L(i,{icon:"sign-out",size:"22",class:"text-n-slate-12"})],8,Ds)):H("",!0),a.showPopoutButton?(U(),k("button",{key:1,class:"button transparent compact new-window--button",onClick:t[1]||(t[1]=(...o)=>r.popoutWindow&&r.popoutWindow(...o))},[L(i,{icon:"open",size:"22",class:"text-n-slate-12"})])):H("",!0),N("button",{class:Q(["button transparent compact close-button",{"rn-close-button":r.isRNWebView}]),onClick:t[2]||(t[2]=(...o)=>r.closeWindow&&r.closeWindow(...o))},[L(i,{icon:"dismiss",size:"24",class:"text-n-slate-12"})],2)])):H("",!0)}const ga=ne(bs,[["render",Es],["__scopeId","data-v-2b25c14b"]]),Os={name:"ChatHeader",components:{FluentIcon:Yt,HeaderActions:ga},mixins:[Ms,da,fa],props:{avatarUrl:{type:String,default:""},title:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1},availableAgents:{type:Array,default:()=>{}}},computed:{isOnline(){const{workingHoursEnabled:e}=this.channelConfig,t=this.availableAgents.length>0;return e?this.isInBetweenTheWorkingHours:t}},methods:{onBackButtonClick(){this.replaceRoute("home")}}},Ss={class:"flex justify-between w-full p-5 bg-n-background gap-2"},As={class:"flex items-center"},Us=["src"],Is={class:"flex flex-col gap-1"},Ps={class:"flex items-center text-base font-medium leading-4 text-n-slate-12"},Ns={class:"ltr:mr-1 rtl:ml-1"},Ws={class:"text-xs leading-3 text-n-slate-11"};function ks(e,t,a,n,s,r){const i=F("FluentIcon"),o=F("HeaderActions"),u=Lt("dompurify-html");return U(),k("header",Ss,[N("div",As,[a.showBackButton?(U(),k("button",{key:0,class:"px-2 ltr:-ml-3 rtl:-mr-3",onClick:t[0]||(t[0]=(...l)=>r.onBackButtonClick&&r.onBackButtonClick(...l))},[L(i,{icon:"chevron-left",size:"24",class:"text-n-slate-12"})])):H("",!0),a.avatarUrl?(U(),k("img",{key:1,class:"w-8 h-8 ltr:mr-3 rtl:ml-3 rounded-full",src:a.avatarUrl,alt:"avatar"},null,8,Us)):H("",!0),N("div",Is,[N("div",Ps,[ve(N("span",Ns,null,512),[[u,a.title]]),N("div",{class:Q(`h-2 w-2 rounded-full
              ${r.isOnline?"bg-green-500":"hidden"}`)},null,2)]),N("div",Ws,Ft(e.replyWaitMessage),1)])]),L(o,{"show-popout-button":a.showPopoutButton},null,8,["show-popout-button"])])}const Rs=ne(Os,[["render",ks]]),Fs={class:"header-expanded pt-6 pb-4 px-5 relative box-border w-full bg-transparent"},Ls=["src"],Hs={class:"mt-4 text-2xl mb-1.5 font-medium text-n-slate-12"},Ys={class:"text-lg leading-normal text-n-slate-11"},$s={__name:"ChatHeaderExpanded",props:{avatarUrl:{type:String,default:""},introHeading:{type:String,default:""},introBody:{type:String,default:""},showPopoutButton:{type:Boolean,default:!1}},setup(e){const t=e,a=me(()=>[t.avatarUrl?"justify-between":"justify-end"]);return(n,s)=>{const r=Lt("dompurify-html");return U(),k("header",Fs,[N("div",{class:Q(["flex items-start",a.value])},[e.avatarUrl?(U(),k("img",{key:0,class:"h-12 rounded-full",src:e.avatarUrl,alt:"Avatar"},null,8,Ls)):H("",!0),L(ga,{"show-popout-button":e.showPopoutButton,"show-end-conversation-button":!1},null,8,["show-popout-button"])],2),ve(N("h2",Hs,null,512),[[r,e.introHeading]]),ve(N("p",Ys,null,512),[[r,e.introBody]])])}}},Bs={components:{Banner:Ts,Branding:qa,ChatHeader:Rs,ChatHeaderExpanded:$s},mixins:[pt],data(){return{showPopoutButton:!1,scrollPosition:0,ticking:!0,disableBranding:window.chatwootWebChannel.disableBranding||!1,requestID:null}},computed:{...lt({appConfig:"appConfig/getAppConfig",availableAgents:"agent/availableAgents"}),portal(){return window.chatwootWebChannel.portal},isHeaderCollapsed(){return this.hasIntroText?!this.isOnHomeView:!0},hasIntroText(){return this.channelConfig.welcomeTitle||this.channelConfig.welcomeTagline},showBackButton(){return["article-viewer","messages","prechat-form"].includes(this.$route.name)},isOnArticleViewer(){return["article-viewer"].includes(this.$route.name)},isOnHomeView(){return["home"].includes(this.$route.name)},opacityClass(){return this.isHeaderCollapsed?{}:this.scrollPosition>30?{"opacity-30":!0}:this.scrollPosition>25?{"opacity-40":!0}:this.scrollPosition>20?{"opacity-60":!0}:this.scrollPosition>15?{"opacity-80":!0}:this.scrollPosition>10?{"opacity-90":!0}:{}}},mounted(){this.$el.addEventListener("scroll",this.updateScrollPosition)},unmounted(){this.$el.removeEventListener("scroll",this.updateScrollPosition),cancelAnimationFrame(this.requestID)},methods:{closeWindow(){A.sendMessage({event:"closeWindow"})},updateScrollPosition(e){this.scrollPosition=e.target.scrollTop,this.ticking||(this.requestID=window.requestAnimationFrame(()=>{this.ticking=!1}),this.ticking=!0)}}},zs={class:"relative flex flex-col h-full"};function Vs(e,t,a,n,s,r){const i=F("ChatHeaderExpanded"),o=F("ChatHeader"),u=F("Banner"),l=F("router-view"),h=F("Branding");return U(),k("div",{class:Q(["w-full h-full bg-n-slate-2 dark:bg-n-solid-1",{"overflow-auto":r.isOnHomeView}]),onKeydown:t[0]||(t[0]=va((..._)=>r.closeWindow&&r.closeWindow(..._),["esc"]))},[N("div",zs,[N("div",{class:Q({expanded:!r.isHeaderCollapsed,collapsed:r.isHeaderCollapsed,"shadow-[0_10px_15px_-16px_rgba(50,50,93,0.08),0_4px_6px_-8px_rgba(50,50,93,0.04)]":r.isHeaderCollapsed,...r.opacityClass})},[r.isHeaderCollapsed?H("",!0):(U(),fe(i,{key:0,"intro-heading":e.channelConfig.welcomeTitle,"intro-body":e.channelConfig.welcomeTagline,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton},null,8,["intro-heading","intro-body","avatar-url","show-popout-button"])),r.isHeaderCollapsed?(U(),fe(o,{key:1,title:e.channelConfig.websiteName,"avatar-url":e.channelConfig.avatarUrl,"show-popout-button":e.appConfig.showPopoutButton,"available-agents":e.availableAgents,"show-back-button":r.showBackButton},null,8,["title","avatar-url","show-popout-button","available-agents","show-back-button"])):H("",!0)],2),L(u),L(l),r.isOnArticleViewer?H("",!0):(U(),fe(h,{key:0,"disable-branding":s.disableBranding},null,8,["disable-branding"]))])],34)}const qs=ne(Bs,[["render",Vs]]),wt=Wa({history:ka(),routes:[{path:"/unread-messages",name:"unread-messages",component:()=>ee(()=>import("./UnreadMessages-TIRAT7dr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))},{path:"/campaigns",name:"campaigns",component:()=>ee(()=>import("./Campaigns-Br5fayX2.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))},{path:"/",component:qs,children:[{path:"",name:"home",component:()=>ee(()=>import("./Home-B0uc_YgW.js"),__vite__mapDeps([22,1,2,3,23,14,15,9,10,19,8,18,13,16,17,20,5,6]))},{path:"/prechat-form",name:"prechat-form",component:()=>ee(()=>import("./PreChatForm-BeBbZ4F7.js"),__vite__mapDeps([24,25,2,1,3,23,18,15,7,8,19,26,5,6,13,14,16,17,20,27]))},{path:"/messages",name:"messages",component:()=>ee(()=>import("./Messages-BHdFuGPN.js"),__vite__mapDeps([28,1,2,3,23,25,5,6,29,9,10,18,15,19,8,7,30,31,32,33,14,17,13,16,20,34]))},{path:"/article",name:"article-viewer",component:()=>ee(()=>import("./ArticleViewer-BeYIG06_.js"),__vite__mapDeps([35,36,2,18,15]))}]}]});wt.beforeEach(async(e,t,a)=>{await le.dispatch("appConfig/setRouteTransitionState",!0),a()});wt.afterEach(()=>{le.dispatch("appConfig/setRouteTransitionState",!1)});const Gs=Ta({legacy:!1,locale:"en",messages:Va}),J=_a(_s);J.use(Gs);J.use(le);J.use(wt);J.use(Ma,Ga);J.directive("on-clickaway",Za);J.use(Ba,za({rules:{startsWithPlus:({value:e})=>Ra(e),isValidPhoneNumber:({value:e})=>Fa(e)}}));window.onload=()=>{window.WOOT_WIDGET=J.mount("#app"),window.actionCable=new _t(window.WOOT_WIDGET,window.chatwootPubsubToken)};export{E as A,A as I,$n as O,Yn as a,da as b,pt as c,Bn as d,wn as i,Ms as n,fa as r,ui as s,ps as u};
//# sourceMappingURL=widget-DcKe5l_U.js.map
